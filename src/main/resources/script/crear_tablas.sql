
 --https://www.youtube.com/watch?v=XYTTHY50Swo
CREATE TABLE RUTA(
 ID int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 NOMBRE VARCHAR(100) NOT NULL
)

CREATE TABLE RUTA2(
 ID SERIAL NOT NULL,
 NOMBRE VARCHAR(100) NOT NULL
)


ALTER TABLE RUTA2
 add constraint pkRuta2
 primary key(ID);

 

ALTER TABLE RUTA
 add constraint pkRuta
 primary key(ID);

 
 CREATE TABLE RUTA_DETALLE(
 ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY ,
 RUTA INT NOT NULL,
 ORIGEN INT NOT NULL,
 DESTINO INT NOT NULL
)


ALTER TABLE RUTA_DETALLE
 add constraint pkRutaDetalle
 primary key(ID);
 

alter table RUTA_DETALLE
add constraint fkRutaDetalleRuta
foreign key (RUTA)
references RUTA (ID);



CREATE TABLE USUARIO(
 ID int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 NOMBRE VARCHAR(100) NOT NULL,
 APELLIDO_PATERNO VARCHAR(50) NOT NULL,
 APELLIDO_MATERNO VARCHAR(50) NOT NULL,
 CLAVE VARCHAR(50) NOT NULL,
  CELULAR VARCHAR(20) NOT NULL,
  EMAIL VARCHAR(100) NOT NULL
);


ALTER TABLE USUARIO
 add constraint pkUsuario
 primary key(ID);
 
 
CREATE TABLE PERFIL(
 ID int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 NOMBRE VARCHAR(100) NOT NULL
);



ALTER TABLE PERFIL
 add constraint pkPerfil
 primary key(ID);

 
 
CREATE TABLE USUARIO_PERFIL(
 ID int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 USUARIO int NOT NULL,
 PERFIL int NOT NULL
);



ALTER TABLE USUARIO_PERFIL
 add constraint pkUsuarioPerfil
 primary key(ID);
  
 

alter table USUARIO_PERFIL
add constraint fkUsuarioPerfilUsuario
foreign key (USUARIO)
references USUARIO (ID);


 
alter table USUARIO_PERFIL
add constraint fkUsuarioPerfilPerfil
foreign key (PERFIL)
references PERFIL (ID);


----------------------

---CREACION DE DATOS
INSERT INTO USUARIO(NOMBRE,APELLIDO_PATERNO,APELLIDO_MATERNO,CLAVE,CELULAR,EMAIL) VALUES('ADMINISTRADOR','AP','AM','ADMIN','13456789','ADMIN');
INSERT INTO PERFIL(NOMBRE)VALUES('PASAJERO');
INSERT INTO PERFIL(NOMBRE)VALUES('CONDUCTOR');
INSERT INTO USUARIO_PERFIL(USUARIO,PERFIL)VALUES((SELECT ID FROM USUARIO WHERE EMAIL='ADMIN'),(SELECT ID FROM PERFIL WHERE NOMBRE='CONDUCTOR'));
INSERT INTO USUARIO_PERFIL(USUARIO,PERFIL)VALUES((SELECT ID FROM USUARIO WHERE EMAIL='ADMIN'),(SELECT ID FROM PERFIL WHERE NOMBRE='PASAJERO'));
